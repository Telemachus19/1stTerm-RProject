---
title: "Project Report"
output: 
  hrbrthemes::ipsum_pdf:
    toc : true
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,  dev = "cairo_pdf")
```
# Team members

-   Ahmed Ashraf Mohamed

    -   ID: 2022446758

-   Abdelrhman Mohamed Abdelhady Hodid

    -   ID : 2022513643

-   Antonuose Gerges Nageh

    -   ID : 20221903971

# Project Description

# Getting data set

## importing the library we are going to use

```{r importing the library me, message=FALSE, warning=FALSE}
library(dplyr)
library(ggplot2)
library(forcats)
library(arules)
library(hrbrthemes)
```

## Reading the data and checking the frist 10 rows of it

```{r Getting data, echo=TRUE}
dataPath <- readline("Enter the path to the data set : ")
grc <- as_tibble(read.csv(dataPath,stringsAsFactors = FALSE))
# displaying first 10 rows of our data
print(grc,n = 10, width = 80)
```

# Visualizing our Data

## Comparison between cash and creadit total spending using box plot

```{r Comparison between cash and creadit total spending using box plot}
ggplot(
  grc,
  aes(x = paymentType, y = total, fill = paymentType)
) +
  geom_boxplot(width = .2, 
               fill = "orange",
               outlier.color = "orange",
               outlier.size = 2)+
  theme_ipsum_rc() +
  theme(
    legend.position="none",
    plot.title = element_text(size=11)
  ) +
  ggtitle("Comparing cash and creadit total using box plot")
```

### Observations

After brief moments of seeing the figure, it is quite easy to see that people nearly equally pay with Cash or credit money. 


## Compare each age and sum of total spending.

```{r Compare each age and sum of total spending,  out.width=c('50%', '50%'), fig.show='hold'}
grc_age <- select(grc,age,total)
grc_age <- group_by(grc_age, age)
grc_age <- summarise(grc_age,totalSpending = sum(total))
ggplot(
  grc_age,
  aes(x = age, y = totalSpending)) + 
  geom_line( color="gray") +
  geom_point(shape=21, color="black", fill="#69b3a2", size=6) +
  theme_ipsum() + 
  ggtitle("Comparing age and the total spending using line plot")
grc_age <- mutate(grc_age,age = fct_reorder(as.factor(age),totalSpending))
ggplot(
  grc_age,
  aes(x = age, y = totalSpending)) +
  geom_col() +
  coord_flip() +
  theme_ipsum() +
  ggtitle("Comparing age and the total spending using bar Plot")

```

### Observations

After seeing both figures, it is easy to conclude that total spending of people aged (37,55 and 22) is higher than the rest of age groups. However, we cannot come to a reasonable explanation for this behavior.

# Generating of association rules

## Brief explanition of Apriori algorithm for generating the rules

Apriori algorithm is an iterative approach for discovering the most frequent item sets. The frequent item sets generated by the algorithm can be used to determine association rules that highlight general trends in the data-set, it is especially useful in the analysis of super-market items in our data set

## Implementing the alogrithm
### Preparing the data for generating the association rules
```{r Preapring the data}
tdata<- strsplit(as.vector(grc$items), ',')
tdata <- transactions(tdata)
```
### Reading both minimum support and minimum confidance from the user
```{r geting the minimum support and minimum confidance}
min_support <- as.numeric(readline("Enter the minimum Support : "))
min_conf <- as.numeric(readline("Enter the minimum Confidance : "))
```
### implementing the algorithm using the built-in function
```{r implementation}
apriori_rules <- apriori(
  tdata,
  parameter = list(supp = min_support, conf = min_conf, minlen = 2))
# Displaying first 100 rows of the rules
as_tibble(DATAFRAME(apriori_rules,separate = TRUE, setStart = "", setEnd = "")) %>%
  print(n = 100, width = 90)
```
